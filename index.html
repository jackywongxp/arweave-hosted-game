<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, maximum-scale=1">
<meta name="description" content="The classic breakout game hosted on Arweave!">
<meta name="keywords" content="breakout html5 arweave apps">
<style>@font-face{font-family:'Roboto';font-style:normal;font-weight:400;font-display:swap;src:local('Roboto'),local('Roboto-Regular'),url(https://fonts.gstatic.com/s/roboto/v20/KFOmCnqEu92Fr1Mu4mxP.ttf) format('truetype')}</style>
<title>Breakout Game - Arweave Hosted</title>
<style>body{font-family:'Roboto',sans-serif;overflow-x:hidden}h1,h2,h3,h4,h5,h6{font-family:Montserrat;text-align:center}canvas{background:#eee;border-bottom:solid #000 5px;border-radius:10px}#drop_zone{padding-left:10px;padding-right:10px;border:2px solid #add8e6;border-radius:10px;width:200px;height:100px}#loginReminder{position:absolute;transform:Translate(-50%,-50%);top:50%;left:50%;width:500%;margin:10px;padding:10px;border-radius:10px;background-color:#eaeaea}</style>
</head>
<body>
<h1>B-R-E-A-K-O-U-T</h1>
<h4>Hosted on Arweave permaweb</h4>
<section style="position:absolute; transform:Translate(-50%,-50%); top:50%; left:50%;">
<center>
<span>Permaweb Hi-Score: <b id="myHiScore">N/A (Please login)</b></span>
<br/>
<span id="txStatus">-</span>
</br>
<canvas id="gameCanvas" width="480" height="320"></canvas>
</br>
<button onclick="pause()">PAUSE</br>(or "P" key)</button>
<div id="loginReminder"></div>
</center>
<div class="file-input">
	<input type="file" id="file"  accept='json/*' onchange="login(this.files)" >
	<div id="loginDesc">Drop a keyfile to login.</div>
</div>
</br>
<ul>
<b style="text-align:left;">Controls</b>
<li>Paddle Movement - <i>LEFT and RIGHT Arrow Keys / Mouse Follow</i></li>
</ul>
</section>
<script>!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(t){return e[t]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=12)}([function(e,t,r){"use strict";function n(e){return"[object Array]"===c.call(e)}function o(e){return null!==e&&"object"==typeof e}function i(e){return"[object Function]"===c.call(e)}function s(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),n(e))for(var r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var a=r(5),u=r(18),c=Object.prototype.toString;e.exports={isArray:n,isArrayBuffer:function(e){return"[object ArrayBuffer]"===c.call(e)},isBuffer:u,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:o,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===c.call(e)},isFile:function(e){return"[object File]"===c.call(e)},isBlob:function(e){return"[object Blob]"===c.call(e)},isFunction:i,isStream:function(e){return o(e)&&i(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:s,merge:function e(){function t(t,n){r[n]="object"==typeof r[n]&&"object"==typeof t?e(r[n],t):t}for(var r={},n=0,o=arguments.length;n<o;n++)s(arguments[n],t);return r},extend:function(e,t,r){return s(t,function(t,n){e[n]=r&&"function"==typeof t?a(t,r):t}),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,r){"use strict";function n(e){if("undefined"==typeof TextEncoder){return(new(0,r(3).TextEncoder)).encode(e)}return(new TextEncoder).encode(e)}function o(e){return new Uint8Array(c.toByteArray(u(e)))}function i(e){return c.fromByteArray(new Uint8Array(e))}function s(e){return a(i(e))}function a(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}function u(e){let t;return t=0==(e=e.replace(/\-/g,"+").replace(/\_/g,"/")).length%4?0:4-e.length%4,e.concat("=".repeat(t))}Object.defineProperty(t,"__esModule",{value:!0});const c=r(37);t.concatBuffers=function(e){let t=0;for(let r=0;r<e.length;r++)t+=e[r].byteLength;let r=new Uint8Array(t),n=0;r.set(new Uint8Array(e[0]),n),n+=e[0].byteLength;for(let t=1;t<e.length;t++)r.set(new Uint8Array(e[t]),n),n+=e[t].byteLength;return r},t.b64UrlToString=function(e){let t=o(e);if("undefined"==typeof TextDecoder){return new(0,r(3).TextDecoder)("utf-8",{fatal:!0}).decode(t)}return new TextDecoder("utf-8",{fatal:!0}).decode(t)},t.bufferToString=function(e){if("undefined"==typeof TextDecoder){return new(0,r(3).TextDecoder)("utf-8",{fatal:!0}).decode(e)}return new TextDecoder("utf-8",{fatal:!0}).decode(e)},t.stringToBuffer=n,t.stringToB64Url=function(e){return s(n(e))},t.b64UrlToBuffer=o,t.bufferTob64=i,t.bufferTob64Url=s,t.b64UrlEncode=a,t.b64UrlDecode=u},function(e,t,r){"use strict";(function(t){function n(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o,i=r(0),s=r(20),a={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:("undefined"==typeof XMLHttpRequest?void 0!==t&&(o=r(7)):o=r(7),o),transformRequest:[function(e,t){return s(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(n(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(n(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&300>e}};u.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){u.headers[e]={}}),i.forEach(["post","put","patch"],function(e){u.headers[e]=i.merge(a)}),e.exports=u}).call(this,r(6))},function(e,t,r){(function(e){function n(e,r){var n={seen:[],stylize:i};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),f(r)?n.showHidden=r:r&&t._extend(n,r),d(n.showHidden)&&(n.showHidden=!1),d(n.depth)&&(n.depth=2),d(n.colors)&&(n.colors=!1),d(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),s(n,e,n.depth)}function o(e,t){var r=n.styles[t];return r?"["+n.colors[r][0]+"m"+e+"["+n.colors[r][1]+"m":e}function i(e){return e}function s(e,r,n){if(e.customInspect&&r&&v(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);return h(o)||(o=s(e,o,n)),o}var i=function(e,t){if(d(t))return e.stylize("undefined","undefined");if(h(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return p(t)?e.stylize(""+t,"number"):f(t)?e.stylize(""+t,"boolean"):l(t)?e.stylize("null","null"):void 0}(e,r);if(i)return i;var y=Object.keys(r),b=function(e){var t={};return e.forEach(function(e){t[e]=!0}),t}(y);if(e.showHidden&&(y=Object.getOwnPropertyNames(r)),m(r)&&(0<=y.indexOf("message")||0<=y.indexOf("description")))return a(r);if(0===y.length){if(v(r)){var T=r.name?": "+r.name:"";return e.stylize("[Function"+T+"]","special")}if(g(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(w(r))return e.stylize(Date.prototype.toString.call(r),"date");if(m(r))return a(r)}var O,A="",x=!1,S=["{","}"];(c(r)&&(x=!0,S=["[","]"]),v(r))&&(A=" [Function"+(r.name?": "+r.name:"")+"]");return g(r)&&(A=" "+RegExp.prototype.toString.call(r)),w(r)&&(A=" "+Date.prototype.toUTCString.call(r)),m(r)&&(A=" "+a(r)),0!==y.length||x&&0!=r.length?0>n?g(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),O=x?function(e,t,r,n,o){for(var i=[],s=0,a=t.length;s<a;++s)E(t,s+"")?i.push(u(e,t,r,n,s+"",!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(u(e,t,r,n,o,!0))}),i}(e,r,n,b,y):y.map(function(t){return u(e,r,n,b,t,x)}),e.seen.pop(),function(e,t,r){return 60<e.reduce(function(e,t){return 0,0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(O,A,S)):S[0]+A+S[1]}function a(e){return"["+Error.prototype.toString.call(e)+"]"}function u(e,t,r,n,o,i){var a,u,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?u=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(u=e.stylize("[Setter]","special")),E(n,o)||(a="["+o+"]"),u||(0>e.seen.indexOf(c.value)?-1<(u=l(r)?s(e,c.value,null):s(e,c.value,r-1)).indexOf("\n")&&(u=i?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),d(a)){if(i&&o.match(/^\d+$/))return u;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+u}function c(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function l(e){return null===e}function p(e){return"number"==typeof e}function h(e){return"string"==typeof e}function d(e){return void 0===e}function g(e){return y(e)&&"[object RegExp]"===b(e)}function y(e){return"object"==typeof e&&null!==e}function w(e){return y(e)&&"[object Date]"===b(e)}function m(e){return y(e)&&("[object Error]"===b(e)||e instanceof Error)}function v(e){return"function"==typeof e}function b(e){return Object.prototype.toString.call(e)}function T(e){return 10>e?"0"+e.toString(10):e.toString(10)}function O(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),B[e.getMonth()],t].join(" ")}function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function A(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}var x=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},S=/%[sdj%]/g;t.format=function(e){if(!h(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(n(arguments[r]));return t.join(" ")}r=1;for(var o=arguments,i=o.length,s=(e+"").replace(S,function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return o[r++]+"";case"%d":return+o[r++];case"%j":try{return JSON.stringify(o[r++])}catch(e){return"[Circular]"}default:return e}}),a=o[r];r<i;a=o[++r])s+=l(a)||!y(a)?" "+a:" "+n(a);return s},t.deprecate=function(r,n){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),o=!0}return r.apply(this,arguments)}};var N,j={};t.debuglog=function(r){if(d(N)&&(N=e.env.NODE_DEBUG||""),r=r.toUpperCase(),!j[r])if(new RegExp("\\b"+r+"\\b","i").test(N)){var n=e.pid;j[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,n,e)}}else j[r]=function(){};return j[r]},t.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=c,t.isBoolean=f,t.isNull=l,t.isNullOrUndefined=function(e){return null==e},t.isNumber=p,t.isString=h,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=d,t.isRegExp=g,t.isObject=y,t.isDate=w,t.isError=m,t.isFunction=v,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(38);var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",O(),t.format.apply(t,arguments))},t.inherits=r(39),t._extend=function(e,t){if(!t||!y(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var U="undefined"==typeof Symbol?void 0:Symbol("util.promisify.custom");t.promisify=function(e){function t(){for(var t,r,n=new Promise(function(e,n){t=e,r=n}),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push(function(e,n){e?r(e):t(n)});try{e.apply(this,o)}catch(e){r(e)}return n}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(U&&e[U]){var t;if("function"!=typeof(t=e[U]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,U,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),U&&Object.defineProperty(t,U,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,x(e))},t.promisify.custom=U,t.callbackify=function(t){function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var o=r.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return o.apply(i,arguments)};t.apply(this,r).then(function(t){e.nextTick(s,null,t)},function(t){e.nextTick(A,t,s)})}if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,x(t)),r}}).call(this,r(6))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(13),o=r(15),i=r(34),s=r(35),a=r(40),u=r(11),c=r(1),f=r(41);t.default=class{constructor(e){this.crypto=e.crypto,this.api=new o.default(e.api),this.wallets=new a.default(this.api,e.crypto),this.transactions=new s.default(this.api,e.crypto),this.silo=new f.default(this.api,this.crypto,this.transactions),this.network=new i.default(this.api),this.ar=new n.default,this.utils=c}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(e,t){const r=await this.wallets.jwkToAddress(t),n={};if(Object.assign(n,e),!(e.data||e.target&&e.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(null==e.owner&&(n.owner=t.n),null==e.last_tx&&(n.last_tx=await this.wallets.getLastTransactionID(r)),"string"==typeof e.data&&(e.data=c.stringToBuffer(e.data)),e.data&&!(e.data instanceof Uint8Array))throw new Error("Expected data to be a string or Uint8Array");if(null==e.reward){const t=e.data?e.data.byteLength:0;n.reward=await this.transactions.getPrice(t,n.target)}return e.data&&(n.data=c.bufferTob64Url(e.data)),new u.default(n)}async createSiloTransaction(e,t,r){const n=await this.wallets.jwkToAddress(t),o={};if(Object.assign(o,e),!e.data)throw new Error("Silo transactions must have a 'data' value");if(!r)throw new Error("No Silo URI specified.");if(e.target||e.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");null==e.owner&&(o.owner=t.n),null==e.last_tx&&(o.last_tx=await this.wallets.getLastTransactionID(n));const i=await this.silo.parseUri(r);if("string"==typeof e.data){const t=await this.crypto.encrypt(c.stringToBuffer(e.data),i.getEncryptionKey());o.reward=await this.transactions.getPrice(t.byteLength),o.data=c.bufferTob64Url(t)}if(e.data instanceof Uint8Array){const t=await this.crypto.encrypt(e.data,i.getEncryptionKey());o.reward=await this.transactions.getPrice(t.byteLength),o.data=c.bufferTob64Url(t)}const s=new u.default(o);return s.addTag("Silo-Name",i.getAccessKey()),s.addTag("Silo-Version","0.1.0"),s}arql(e){return this.api.post("/arql",e).then(e=>e.data||[])}}},function(e){"use strict";e.exports=function(e,t){return function(){for(var r=Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e){function t(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function n(e){if(u===setTimeout)return setTimeout(e,0);if((u===t||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(){h&&l&&(h=!1,l.length?p=l.concat(p):d=-1,p.length&&i())}function i(){if(!h){var e=n(o);h=!0;for(var t=p.length;t;){for(l=p,p=[];++d<t;)l&&l[d].run();d=-1,t=p.length}l=null,h=!1,function(e){if(c===clearTimeout)return clearTimeout(e);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function a(){}var u,c,f=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:t}catch(e){u=t}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(e){c=r}}();var l,p=[],h=!1,d=-1;f.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];p.push(new s(e,t)),1!==p.length||h||n(i)},s.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=a,f.addListener=a,f.once=a,f.off=a,f.removeListener=a,f.removeAllListeners=a,f.emit=a,f.prependListener=a,f.prependOnceListener=a,f.listeners=function(){return[]},f.binding=function(){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,r){"use strict";var n=r(0),o=r(21),i=r(23),s=r(24),a=r(25),u=r(8);e.exports=function(e){return new Promise(function(t,c){var f=e.data,l=e.headers;n.isFormData(f)&&delete l["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",d=e.auth.password||"";l.Authorization="Basic "+btoa(h+":"+d)}if(p.open(e.method.toUpperCase(),i(e.url,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in p?s(p.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p};o(t,c,n),p=null}},p.onerror=function(){c(u("Network Error",e,null,p)),p=null},p.ontimeout=function(){c(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var g=r(26),y=(e.withCredentials||a(e.url))&&e.xsrfCookieName?g.read(e.xsrfCookieName):void 0;y&&(l[e.xsrfHeaderName]=y)}if("setRequestHeader"in p&&n.forEach(l,function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete l[t]:p.setRequestHeader(t,e)}),e.withCredentials&&(p.withCredentials=!0),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),c(e),p=null)}),void 0===f&&(f=null),p.send(f)})}},function(e,t,r){"use strict";var n=r(22);e.exports=function(e,t,r,o,i){var s=new Error(e);return n(s,t,r,o,i)}},function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);class o{get(e,t){if(!Object.getOwnPropertyNames(this).includes(e))throw new Error(`Field "${e}" is not a property of the Arweave Transaction class.`);return t&&1==t.decode?t&&t.string?n.b64UrlToString(this[e]):n.b64UrlToBuffer(this[e]):this[e]}}class i extends o{constructor(e,t,r=!1){super(),this.name=e,this.value=t}}t.Tag=i,t.default=class extends o{constructor(e={}){super(),this.id="",this.last_tx="",this.owner="",this.tags=[],this.target="",this.quantity="0",this.data="",this.reward="0",this.signature="",Object.assign(this,e),e.tags&&(this.tags=e.tags.map(e=>new i(e.name,e.value)))}addTag(e,t){this.tags.push(new i(n.stringToB64Url(e),n.stringToB64Url(t)))}toJSON(){return{id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:this.data,reward:this.reward,signature:this.signature}}setSignature({signature:e,id:t}){this.signature=e,this.id=t}getSignatureData(){let e=this.tags.reduce((e,t)=>e+t.get("name",{decode:!0,string:!0})+t.get("value",{decode:!0,string:!0}),"");return n.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),n.stringToBuffer(this.quantity),n.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),n.stringToBuffer(e)])}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4),o=r(42);n.default.init=function(e={}){const t=function(){const e={host:"arweave.net",port:443,protocol:"https"};if(!(window&&window.location&&window.location.protocol&&window.location.hostname))return e;const t=window.location.protocol.replace(":",""),r=window.location.hostname,n=window.location.port?parseInt(window.location.port):"https"==t?443:80;return["localhost","127.0.0.1"].includes(r)||"file"==t?e:{host:r,port:n,protocol:t}}(),r=e.protocol||t.protocol,i=e.host||t.host,s=e.port||t.port;return new n.default({api:Object.assign({},e,{host:i,protocol:r,port:s}),crypto:new o.default})},window.Arweave=n.default,function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(4)),t.default=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(14);t.default=class{constructor(){this.BigNum=(e,t)=>{return new(n.BigNumber.clone({DECIMAL_PLACES:t}))(e)}}winstonToAr(e,{formatted:t=!1,decimals:r=12,trim:n=!0}={}){let o=this.stringToBigNum(e,r).shiftedBy(-12);return t?o.toFormat(r):o.toFixed(r)}arToWinston(e,{formatted:t=!1}={}){let r=this.stringToBigNum(e).shiftedBy(12);return t?r.toFormat():r.toFixed(0)}compare(e,t){let r=this.stringToBigNum(e),n=this.stringToBigNum(t);return r.comparedTo(n)}isEqual(e,t){return 0===this.compare(e,t)}isLessThan(e,t){let r=this.stringToBigNum(e),n=this.stringToBigNum(t);return r.isLessThan(n)}isGreaterThan(e,t){let r=this.stringToBigNum(e),n=this.stringToBigNum(t);return r.isGreaterThan(n)}add(e,t){let r=this.stringToBigNum(e);this.stringToBigNum(t);return r.plus(t).toFixed(0)}sub(e,t){let r=this.stringToBigNum(e);this.stringToBigNum(t);return r.minus(t).toFixed(0)}stringToBigNum(e,t=12){return this.BigNum(e,t)}}},function(e,t,r){var n;!function(){"use strict";function o(e){var t=0|e;return 0<e||e===t?t:t-1}function i(e){for(var t,r,n=1,o=e.length,i=e[0]+"";n<o;){for(t=e[n++]+"",r=v-t.length;r--;t="0"+t);i+=t}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function s(e,t){var r,n,o=e.c,i=t.c,s=e.s,a=t.s,u=e.e,c=t.e;if(!s||!a)return null;if(r=o&&!o[0],n=i&&!i[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=0>s,n=u==c,!o||!i)return n?0:!o^r?1:-1;if(!n)return u>c^r?1:-1;for(a=(u=o.length)<(c=i.length)?u:c,s=0;s<a;s++)if(o[s]!=i[s])return o[s]>i[s]^r?1:-1;return u==c?0:u>c^r?1:-1}function a(e,t,r,n){if(e<t||e>r||e!==g(e))throw Error(y+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+e)}function u(e){var t=e.c.length-1;return o(e.e/v)==t&&0!=e.c[t]%2}function c(e,t){return(1<e.length?e.charAt(0)+"."+e.slice(1):e)+(0>t?"e":"e+")+t}function f(e,t,r){var n,o;if(0>t){for(o=r+".";++t;o+=r);e=o+e}else if(++t>(n=e.length)){for(o=r,t-=n;--t;o+=r);e+=o}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}var l,p=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,d=Math.ceil,g=Math.floor,y="[BigNumber Error] ",w=y+"Number primitive has more than 15 significant digits: ",m=1e14,v=14,b=9007199254740991,T=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],O=1e7,E=1e9;(l=function e(t){function r(e,t){var n,o,i,s,u,c,f,l,h=this;if(!(h instanceof r))return new r(e,t);if(null==t){if(e&&!0===e._isBigNumber)return h.s=e.s,void(!e.c||e.e>z?h.c=h.e=null:e.e<K?h.c=[h.e=0]:(h.e=e.e,h.c=e.c.slice()));if((c="number"==typeof e)&&0==0*e){if(h.s=0>1/e?(e=-e,-1):1,e===~~e){for(s=0,u=e;10<=u;u/=10,s++);return void(s>z?h.c=h.e=null:(h.e=s,h.c=[e]))}l=e+""}else{if(!p.test(l=e+""))return B(h,l,c);h.s=45==l.charCodeAt(0)?(l=l.slice(1),-1):1}-1<(s=l.indexOf("."))&&(l=l.replace(".","")),0<(u=l.search(/e/i))?(0>s&&(s=u),s+=+l.slice(u+1),l=l.substring(0,u)):0>s&&(s=l.length)}else{if(a(t,2,J.length,"Base"),10==t)return x(h=new r(e),k+h.e+1,q);if(l=e+"",c="number"==typeof e){if(0!=0*e)return B(h,l,c,t);if(h.s=0>1/e?(l=l.slice(1),-1):1,r.DEBUG&&15<l.replace(/^0\.0*|\./,"").length)throw Error(w+e)}else h.s=45===l.charCodeAt(0)?(l=l.slice(1),-1):1;for(n=J.slice(0,t),s=u=0,f=l.length;u<f;u++)if(0>n.indexOf(o=l.charAt(u))){if("."==o){if(u>s){s=f;continue}}else if(!i&&(l==l.toUpperCase()&&(l=l.toLowerCase())||l==l.toLowerCase()&&(l=l.toUpperCase()))){i=!0,u=-1,s=0;continue}return B(h,e+"",c,t)}c=!1,-1<(s=(l=j(l,t,10,h.s)).indexOf("."))?l=l.replace(".",""):s=l.length}for(u=0;48===l.charCodeAt(u);u++);for(f=l.length;48===l.charCodeAt(--f););if(l=l.slice(u,++f)){if(f-=u,c&&r.DEBUG&&15<f&&(e>b||e!==g(e)))throw Error(w+h.s*e);if((s=s-u-1)>z)h.c=h.e=null;else if(s<K)h.c=[h.e=0];else{if(h.e=s,h.c=[],u=(s+1)%v,0>s&&(u+=v),u<f){for(u&&h.c.push(+l.slice(0,u)),f-=v;u<f;)h.c.push(+l.slice(u,u+=v));u=v-(l=l.slice(u)).length}else u-=f;for(;u--;l+="0");h.c.push(+l)}}else h.c=[h.e=0]}function n(e,t,n,o){var s,u,l,p,h;if(null==n?n=q:a(n,0,8),!e.c)return e.toString();if(s=e.c[0],l=e.e,null==t)h=i(e.c),h=1==o||2==o&&(l<=F||l>=M)?c(h,l):f(h,l,"0");else if(u=(e=x(new r(e),t,n)).e,p=(h=i(e.c)).length,1==o||2==o&&(t<=u||u<=F)){for(;p<t;h+="0",p++);h=c(h,u)}else if(t-=l,h=f(h,u,"0"),u+1>p){if(0<--t)for(h+=".";t--;h+="0");}else if(0<(t+=u-p))for(u+1==p&&(h+=".");t--;h+="0");return 0>e.s&&s?"-"+h:h}function l(e,t){for(var n,o=1,i=new r(e[0]);o<e.length;o++){if(!(n=new r(e[o])).s){i=n;break}t.call(i,n)&&(i=n)}return i}function A(e,t,r){for(var n=1,o=t.length;!t[--o];t.pop());for(o=t[0];10<=o;o/=10,n++);return(r=n+r*v-1)>z?e.c=e.e=null:r<K?e.c=[e.e=0]:(e.e=r,e.c=t),e}function x(e,t,r,n){var o,i,s,a,u,c,f,l=e.c,p=T;if(l){e:{for(o=1,a=l[0];10<=a;a/=10,o++);if(0>(i=t-o))i+=v,s=t,f=0|(u=l[c=0])/p[o-s-1]%10;else if((c=d((i+1)/v))>=l.length){if(!n)break e;for(;l.length<=c;l.push(0));u=f=0,o=1,s=(i%=v)-v+1}else{for(u=a=l[c],o=1;10<=a;a/=10,o++);f=0>(s=(i%=v)-v+o)?0:0|u/p[o-s-1]%10}if(n=n||0>t||null!=l[c+1]||(0>s?u:u%p[o-s-1]),n=4>r?(f||n)&&(0==r||r==(0>e.s?3:2)):5<f||5==f&&(4==r||n||6==r&&1&(0<i?0<s?u/p[o-s]:0:l[c-1])%10||r==(0>e.s?8:7)),1>t||!l[0])return l.length=0,n?(t-=e.e+1,l[0]=p[(v-t%v)%v],e.e=-t||0):l[0]=e.e=0,e;if(0==i?(l.length=c,a=1,c--):(l.length=c+1,a=p[v-i],l[c]=0<s?g(u/p[o-s]%p[s])*a:0),n)for(;;){if(0==c){for(i=1,s=l[0];10<=s;s/=10,i++);for(s=l[0]+=a,a=1;10<=s;s/=10,a++);i!=a&&(e.e++,l[0]==m&&(l[0]=1));break}if(l[c]+=a,l[c]!=m)break;l[c--]=0,a=1}for(i=l.length;0===l[--i];l.pop());}e.e>z?e.c=e.e=null:e.e<K&&(e.c=[e.e=0])}return e}function S(e){var t,r=e.e;return null===r?e.toString():(t=i(e.c),t=r<=F||r>=M?c(t,r):f(t,r,"0"),0>e.s?"-"+t:t)}var N,j,B,U,P,_,C,D,R,L=r.prototype={constructor:r,toString:null,valueOf:null},I=new r(1),k=20,q=4,F=-7,M=21,K=-1e7,z=1e7,$=!1,H=1,G=0,V={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},J="0123456789abcdefghijklmnopqrstuvwxyz";return r.clone=e,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(y+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(a(r=e[t],0,E,t),k=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(a(r=e[t],0,8,t),q=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(a(r[0],-E,0,t),a(r[1],0,E,t),F=r[0],M=r[1]):(a(r,-E,E,t),F=-(M=0>r?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)a(r[0],-E,-1,t),a(r[1],1,E,t),K=r[0],z=r[1];else{if(a(r,-E,E,t),!r)throw Error(y+t+" cannot be zero: "+r);K=-(z=0>r?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(y+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw $=!r,Error(y+"crypto unavailable");$=r}else $=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(a(r=e[t],0,9,t),H=r),e.hasOwnProperty(t="POW_PRECISION")&&(a(r=e[t],0,E,t),G=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(y+t+" not an object: "+r);V=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.$|[+-.\s]|(.).*\1/.test(r))throw Error(y+t+" invalid: "+r);J=r}}return{DECIMAL_PLACES:k,ROUNDING_MODE:q,EXPONENTIAL_AT:[F,M],RANGE:[K,z],CRYPTO:$,MODULO_MODE:H,POW_PRECISION:G,FORMAT:V,ALPHABET:J}},r.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!r.DEBUG)return!0;var t,n,o=e.c,i=e.e,s=e.s;e:if("[object Array]"=={}.toString.call(o)){if((1===s||-1===s)&&i>=-E&&i<=E&&i===g(i)){if(0===o[0]){if(0===i&&1===o.length)return!0;break e}if(1>(t=(i+1)%v)&&(t+=v),(o[0]+"").length==t){for(t=0;t<o.length;t++)if(0>(n=o[t])||n>=m||n!==g(n))break e;if(0!==n)return!0}}}else if(null===o&&null===i&&(null===s||1===s||-1===s))return!0;throw Error(y+"Invalid BigNumber: "+e)},r.maximum=r.max=function(){return l(arguments,L.lt)},r.minimum=r.min=function(){return l(arguments,L.gt)},r.random=(R=2097151&9007199254740992*Math.random()?function(){return g(9007199254740992*Math.random())}:function(){return 8388608*(0|1073741824*Math.random())+(0|8388608*Math.random())},function(e){var t,n,o,i,s,u=0,c=[],f=new r(I);if(null==e?e=k:a(e,0,E),i=d(e/v),$)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));u<i;)9e15<=(s=131072*t[u]+(t[u+1]>>>11))?(n=crypto.getRandomValues(new Uint32Array(2)),t[u]=n[0],t[u+1]=n[1]):(c.push(s%1e14),u+=2);u=i/2}else{if(!crypto.randomBytes)throw $=!1,Error(y+"crypto unavailable");for(t=crypto.randomBytes(i*=7);u<i;)9e15<=(s=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])?crypto.randomBytes(7).copy(t,u):(c.push(s%1e14),u+=7);u=i/7}if(!$)for(;u<i;)9e15>(s=R())&&(c[u++]=s%1e14);for(i=c[--u],e%=v,i&&e&&(s=T[v-e],c[u]=g(i/s)*s);0===c[u];c.pop(),u--);if(0>u)c=[o=0];else{for(o=-1;0===c[0];c.splice(0,1),o-=v);for(u=1,s=c[0];10<=s;s/=10,u++);u<v&&(o-=v-u)}return f.e=o,f.c=c,f}),r.sum=function(){for(var e=1,t=arguments,n=new r(t[0]);e<t.length;)n=n.plus(t[e++]);return n},j=function(){function e(e,t,r,n){for(var o,i,s=[0],a=0,u=e.length;a<u;){for(i=s.length;i--;s[i]*=t);for(s[0]+=n.indexOf(e.charAt(a++)),o=0;o<s.length;o++)s[o]>r-1&&(null==s[o+1]&&(s[o+1]=0),s[o+1]+=0|s[o]/r,s[o]%=r)}return s.reverse()}return function(t,n,o,s,a){var u,c,l,p,h,d,g,y,w=t.indexOf("."),m=k,v=q;for(0<=w&&(p=G,G=0,t=t.replace(".",""),d=(y=new r(n)).pow(t.length-w),G=p,y.c=e(f(i(d.c),d.e,"0"),10,o,"0123456789"),y.e=y.c.length),l=p=(g=e(t,n,o,a?(u=J,"0123456789"):(u="0123456789",J))).length;0==g[--p];g.pop());if(!g[0])return u.charAt(0);if(0>w?--l:(d.c=g,d.e=l,d.s=s,g=(d=N(d,y,m,v,o)).c,h=d.r,l=d.e),w=g[c=l+m+1],p=o/2,h=h||0>c||null!=g[c+1],h=4>v?(null!=w||h)&&(0==v||v==(0>d.s?3:2)):w>p||w==p&&(4==v||h||6==v&&1&g[c-1]||v==(0>d.s?8:7)),1>c||!g[0])t=h?f(u.charAt(1),-m,u.charAt(0)):u.charAt(0);else{if(g.length=c,h)for(--o;++g[--c]>o;)g[c]=0,c||(++l,g=[1].concat(g));for(p=g.length;!g[--p];);for(w=0,t="";w<=p;t+=u.charAt(g[w++]));t=f(t,l,u.charAt(0))}return t}}(),N=function(){function e(e,t,r){var n,o,i,s,a=0,u=e.length,c=t%O,f=0|t/O;for(e=e.slice();u--;)a=(0|(o=c*(i=e[u]%O)+(n=f*i+(s=0|e[u]/O)*c)%O*O+a)/r)+(0|n/O)+f*s,e[u]=o%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var o,i;if(r!=n)i=r>n?1:-1;else for(o=i=0;o<r;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function n(e,t,r,n){for(var o=0;r--;)e[r]-=o,o=e[r]<t[r]?1:0,e[r]=o*n+e[r]-t[r];for(;!e[0]&&1<e.length;e.splice(0,1));}return function(i,s,a,u,c){var f,l,p,h,d,y,w,b,T,O,E,A,S,N,j,B,U,P=i.s==s.s?1:-1,_=i.c,C=s.c;if(!(_&&_[0]&&C&&C[0]))return new r(i.s&&s.s&&(_?!C||_[0]!=C[0]:C)?_&&0==_[0]||!C?0*P:P/0:NaN);for(T=(b=new r(P)).c=[],P=a+(l=i.e-s.e)+1,c||(c=m,l=o(i.e/v)-o(s.e/v),P=0|P/v),p=0;C[p]==(_[p]||0);p++);if(C[p]>(_[p]||0)&&l--,0>P)T.push(1),h=!0;else{for(N=_.length,B=C.length,p=0,P+=2,1<(d=g(c/(C[0]+1)))&&(C=e(C,d,c),_=e(_,d,c),B=C.length,N=_.length),S=B,E=(O=_.slice(0,B)).length;E<B;O[E++]=0);U=C.slice(),U=[0].concat(U),j=C[0],C[1]>=c/2&&j++;do{if(d=0,0>(f=t(C,O,B,E))){if(A=O[0],B!=E&&(A=A*c+(O[1]||0)),1<(d=g(A/j)))for(d>=c&&(d=c-1),w=(y=e(C,d,c)).length,E=O.length;1==t(y,O,w,E);)d--,n(y,B<w?U:C,w,c),w=y.length,f=1;else 0==d&&(f=d=1),w=(y=C.slice()).length;if(w<E&&(y=[0].concat(y)),n(O,y,E,c),E=O.length,-1==f)for(;1>t(C,O,B,E);)d++,n(O,B<E?U:C,E,c),E=O.length}else 0===f&&(d++,O=[0]);T[p++]=d,O[0]?O[E++]=_[S]||0:(O=[_[S]],E=1)}while((S++<N||null!=O[0])&&P--);h=null!=O[0],T[0]||T.splice(0,1)}if(c==m){for(p=1,P=T[0];10<=P;P/=10,p++);x(b,a+(b.e=p+l*v-1)+1,u,h)}else b.e=l,b.r=+h;return b}}(),U=/^(-?)0([xbo])(?=\w[\w.]*$)/i,P=/^([^.]+)\.$/,_=/^\.([^.]+)$/,C=/^-?(Infinity|NaN)$/,D=/^\s*\+(?=[\w.])|^\s+|\s+$/g,B=function(e,t,n,o){var i,s=n?t:t.replace(D,"");if(C.test(s))e.s=isNaN(s)?null:0>s?-1:1;else{if(!n&&(s=s.replace(U,function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,o&&o!=i?e:t}),o&&(i=o,s=s.replace(P,"$1").replace(_,"0.$1")),t!=s))return new r(s,i);if(r.DEBUG)throw Error(y+"Not a"+(o?" base "+o:"")+" number: "+t);e.s=null}e.c=e.e=null},L.absoluteValue=L.abs=function(){var e=new r(this);return 0>e.s&&(e.s=1),e},L.comparedTo=function(e,t){return s(this,new r(e,t))},L.decimalPlaces=L.dp=function(e,t){var n,i,s,u=this;if(null!=e)return a(e,0,E),null==t?t=q:a(t,0,8),x(new r(u),e+u.e+1,t);if(!(n=u.c))return null;if(i=((s=n.length-1)-o(this.e/v))*v,s=n[s])for(;0==s%10;s/=10,i--);return 0>i&&(i=0),i},L.dividedBy=L.div=function(e,t){return N(this,new r(e,t),k,q)},L.dividedToIntegerBy=L.idiv=function(e,t){return N(this,new r(e,t),0,1)},L.exponentiatedBy=L.pow=function(e,t){var n,o,i,s,a,c,f,l,p=this;if((e=new r(e)).c&&!e.isInteger())throw Error(y+"Exponent not an integer: "+S(e));if(null!=t&&(t=new r(t)),a=14<e.e,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return l=new r(Math.pow(+S(p),a?2-u(e):+S(e))),t?l.mod(t):l;if(c=0>e.s,t){if(t.c?!t.c[0]:!t.s)return new r(NaN);(o=!c&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(9<e.e&&(0<p.e||-1>p.e||(0==p.e?1<p.c[0]||a&&24e7<=p.c[1]:8e13>p.c[0]||a&&9999975e7>=p.c[0])))return s=0>p.s&&u(e)?-0:0,-1<p.e&&(s=1/s),new r(c?1/s:s);G&&(s=d(G/v+2))}for(a?(n=new r(.5),c&&(e.s=1),f=u(e)):f=(i=Math.abs(+S(e)))%2,l=new r(I);;){if(f){if(!(l=l.times(p)).c)break;s?l.c.length>s&&(l.c.length=s):o&&(l=l.mod(t))}if(i){if(0===(i=g(i/2)))break;f=i%2}else if(x(e=e.times(n),e.e+1,1),14<e.e)f=u(e);else{if(0===(i=+S(e)))break;f=i%2}p=p.times(p),s?p.c&&p.c.length>s&&(p.c.length=s):o&&(p=p.mod(t))}return o?l:(c&&(l=I.div(l)),t?l.mod(t):s?x(l,G,q,void 0):l)},L.integerValue=function(e){var t=new r(this);return null==e?e=q:a(e,0,8),x(t,t.e+1,e)},L.isEqualTo=L.eq=function(e,t){return 0===s(this,new r(e,t))},L.isFinite=function(){return!!this.c},L.isGreaterThan=L.gt=function(e,t){return 0<s(this,new r(e,t))},L.isGreaterThanOrEqualTo=L.gte=function(e,t){return 1===(t=s(this,new r(e,t)))||0===t},L.isInteger=function(){return!!this.c&&o(this.e/v)>this.c.length-2},L.isLessThan=L.lt=function(e,t){return 0>s(this,new r(e,t))},L.isLessThanOrEqualTo=L.lte=function(e,t){return-1===(t=s(this,new r(e,t)))||0===t},L.isNaN=function(){return!this.s},L.isNegative=function(){return 0>this.s},L.isPositive=function(){return 0<this.s},L.isZero=function(){return!!this.c&&0==this.c[0]},L.minus=function(e,t){var n,i,s,a,u=this,c=u.s;if(t=(e=new r(e,t)).s,!c||!t)return new r(NaN);if(c!=t)return e.s=-t,u.plus(e);var f=u.e/v,l=e.e/v,p=u.c,h=e.c;if(!f||!l){if(!p||!h)return p?(e.s=-t,e):new r(h?u:NaN);if(!p[0]||!h[0])return h[0]?(e.s=-t,e):new r(p[0]?u:3==q?-0:0)}if(f=o(f),l=o(l),p=p.slice(),c=f-l){for((a=0>c)?(c=-c,s=p):(l=f,s=h),s.reverse(),t=c;t--;s.push(0));s.reverse()}else for(i=(a=(c=p.length)<(t=h.length))?c:t,c=t=0;t<i;t++)if(p[t]!=h[t]){a=p[t]<h[t];break}if(a&&(s=p,p=h,h=s,e.s=-e.s),0<(t=(i=h.length)-(n=p.length)))for(;t--;p[n++]=0);for(t=m-1;i>c;){if(p[--i]<h[i]){for(n=i;n&&!p[--n];p[n]=t);--p[n],p[i]+=m}p[i]-=h[i]}for(;0==p[0];p.splice(0,1),--l);return p[0]?A(e,p,l):(e.s=3==q?-1:1,e.c=[e.e=0],e)},L.modulo=L.mod=function(e,t){var n,o,i=this;return e=new r(e,t),!i.c||!e.s||e.c&&!e.c[0]?new r(NaN):!e.c||i.c&&!i.c[0]?new r(i):(9==H?(o=e.s,e.s=1,n=N(i,e,0,3),e.s=o,n.s*=o):n=N(i,e,0,H),(e=i.minus(n.times(e))).c[0]||1!=H||(e.s=i.s),e)},L.multipliedBy=L.times=function(e,t){var n,i,s,a,u,c,f,l,p,h,d,g,y,w,b,T=this,E=T.c,x=(e=new r(e,t)).c;if(!(E&&x&&E[0]&&x[0]))return T.s&&e.s&&(!E||E[0]||x)&&(!x||x[0]||E)?(e.s*=T.s,E&&x?(e.c=[0],e.e=0):e.c=e.e=null):e.c=e.e=e.s=null,e;for(i=o(T.e/v)+o(e.e/v),e.s*=T.s,(f=E.length)<(h=x.length)&&(y=E,E=x,x=y,s=f,f=h,h=s),s=f+h,y=[];s--;y.push(0));for(w=m,b=O,s=h;0<=--s;){for(n=0,d=x[s]%b,g=0|x[s]/b,a=s+(u=f);a>s;)n=(0|(l=d*(l=E[--u]%b)+(c=g*l+(p=0|E[u]/b)*d)%b*b+y[a]+n)/w)+(0|c/b)+g*p,y[a--]=l%w;y[a]=n}return n?++i:y.splice(0,1),A(e,y,i)},L.negated=function(){var e=new r(this);return e.s=-e.s||null,e},L.plus=function(e,t){var n,i=this,s=i.s;if(t=(e=new r(e,t)).s,!s||!t)return new r(NaN);if(s!=t)return e.s=-t,i.minus(e);var a=i.e/v,u=e.e/v,c=i.c,f=e.c;if(!a||!u){if(!c||!f)return new r(s/0);if(!c[0]||!f[0])return f[0]?e:new r(c[0]?i:0*s)}if(a=o(a),u=o(u),c=c.slice(),s=a-u){for(0<s?(u=a,n=f):(s=-s,n=c),n.reverse();s--;n.push(0));n.reverse()}for(0>(s=c.length)-(t=f.length)&&(n=f,f=c,c=n,t=s),s=0;t;)s=0|(c[--t]=c[t]+f[t]+s)/m,c[t]=m===c[t]?0:c[t]%m;return s&&(c=[s].concat(c),++u),A(e,c,u)},L.precision=L.sd=function(e,t){var n,o,i,s=this;if(null!=e&&e!==!!e)return a(e,1,E),null==t?t=q:a(t,0,8),x(new r(s),e,t);if(!(n=s.c))return null;if(o=(i=n.length-1)*v+1,i=n[i]){for(;0==i%10;i/=10,o--);for(i=n[0];10<=i;i/=10,o++);}return e&&s.e+1>o&&(o=s.e+1),o},L.shiftedBy=function(e){return a(e,-b,b),this.times("1e"+e)},L.squareRoot=L.sqrt=function(){var e,t,n,s,a,u=Math.sqrt,c=this,f=c.c,l=c.s,p=c.e,h=k+4,d=new r("0.5");if(1!==l||!f||!f[0])return new r(!l||0>l&&(!f||f[0])?NaN:f?c:1/0);if(0==(l=u(+S(c)))||l==1/0?(0==((t=i(f)).length+p)%2&&(t+="0"),l=u(+t),p=o((p+1)/2)-(0>p||p%2),l==1/0?t="1e"+p:t=(t=l.toExponential()).slice(0,t.indexOf("e")+1)+p,n=new r(t)):n=new r(l+""),n.c[0])for(3>(l=(p=n.e)+h)&&(l=0);;)if(a=n,n=d.times(a.plus(N(c,a,h,1))),i(a.c).slice(0,l)===(t=i(n.c)).slice(0,l)){if(n.e<p&&--l,"9999"!=(t=t.slice(l-3,l+1))&&(s||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(x(n,n.e+k+2,1),e=!n.times(n).eq(c));break}if(!s&&(x(a,a.e+k+2,0),a.times(a).eq(c))){n=a;break}h+=4,l+=4,s=1}return x(n,n.e+k+1,q,e)},L.toExponential=function(e,t){return null!=e&&(a(e,0,E),e++),n(this,e,t,1)},L.toFixed=function(e,t){return null!=e&&(a(e,0,E),e=e+this.e+1),n(this,e,t)},L.toFormat=function(e,t,r){var n,o=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=V;else if("object"!=typeof r)throw Error(y+"Argument not an object: "+r);if(n=o.toFixed(e,t),o.c){var i,s=n.split("."),a=+r.groupSize,u=+r.secondaryGroupSize,c=r.groupSeparator||"",f=s[0],l=s[1],p=0>o.s,h=p?f.slice(1):f,d=h.length;if(u&&(i=a,a=u,u=i,d-=i),0<a&&0<d){for(i=d%a||a,f=h.substr(0,i);i<d;i+=a)f+=c+h.substr(i,a);0<u&&(f+=c+h.slice(i)),p&&(f="-"+f)}n=l?f+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?l.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):l):f}return(r.prefix||"")+n+(r.suffix||"")},L.toFraction=function(e){var t,n,o,s,a,u,c,f,l,p,h,d,g=this,w=g.c;if(null!=e&&(!(c=new r(e)).isInteger()&&(c.c||1!==c.s)||c.lt(I)))throw Error(y+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+S(c));if(!w)return new r(g);for(t=new r(I),l=n=new r(I),o=f=new r(I),d=i(w),a=t.e=d.length-g.e-1,t.c[0]=T[0>(u=a%v)?v+u:u],e=!e||0<c.comparedTo(t)?0<a?t:l:c,u=z,z=1/0,c=new r(d),f.c[0]=0;p=N(c,t,0,1),1!=(s=n.plus(p.times(o))).comparedTo(e);)n=o,o=s,l=f.plus(p.times(s=l)),f=s,t=c.minus(p.times(s=t)),c=s;return s=N(e.minus(n),o,0,1),f=f.plus(s.times(l)),n=n.plus(s.times(o)),f.s=l.s=g.s,h=1>N(l,o,a*=2,q).minus(g).abs().comparedTo(N(f,n,a,q).minus(g).abs())?[l,o]:[f,n],z=u,h},L.toNumber=function(){return+S(this)},L.toPrecision=function(e,t){return null!=e&&a(e,1,E),n(this,e,t,2)},L.toString=function(e){var t,n=this,o=n.s,s=n.e;return null===s?o?(t="Infinity",0>o&&(t="-"+t)):t="NaN":(null==e?t=s<=F||s>=M?c(i(n.c),s):f(i(n.c),s,"0"):10===e?t=f(i((n=x(new r(n),k+s+1,q)).c),n.e,"0"):(a(e,2,J.length,"Base"),t=j(f(i(n.c),s,"0"),10,e,o,!0)),0>o&&n.c[0]&&(t="-"+t)),t},L.valueOf=L.toJSON=function(){return S(this)},L._isBigNumber=!0,h&&(L[Symbol.toStringTag]="BigNumber",L[Symbol.for("nodejs.util.inspect.custom")]=L.valueOf),null!=t&&r.set(t),r}()).default=l.BigNumber=l,void 0===(n=function(){return l}.call(t,r,t,e))||(e.exports=n)}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(16);t.default=class{constructor(e){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(e)}applyConfig(e){this.config=this.mergeDefaults(e)}getConfig(){return this.config}mergeDefaults(e){const t=e.protocol||"http",r=e.port||("https"===t?443:80);return{host:e.host||"127.0.0.1",protocol:t,port:r,timeout:e.timeout||2e4,logging:e.logging||!1,logger:e.logger||console.log}}async get(e,t){try{return await this.request().get(e,t)}catch(e){if(e.response&&e.response.status)return e.response;throw e}}async post(e,t,r){try{return await this.request().post(e,t,r)}catch(e){if(e.response&&e.response.status)return e.response;throw e}}request(){let e=n.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout});return this.config.logging&&(e.interceptors.request.use(e=>(this.config.logger(`Requesting: ${e.baseURL}/${e.url}`),e)),e.interceptors.response.use(e=>(this.config.logger(`Response:   ${e.config.url} - ${e.status}`),e))),e}}},function(e,t,r){e.exports=r(17)},function(e,t,r){"use strict";function n(e){var t=new s(e),r=i(s.prototype.request,t);return o.extend(r,s.prototype,t),o.extend(r,t),r}var o=r(0),i=r(5),s=r(19),a=r(2),u=n(a);u.Axios=s,u.create=function(e){return n(o.merge(a,e))},u.Cancel=r(10),u.CancelToken=r(32),u.isCancel=r(9),u.all=function(e){return Promise.all(e)},u.spread=r(33),e.exports=u,e.exports.default=u},function(e){e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,r){"use strict";function n(e){this.defaults=e,this.interceptors={request:new s,response:new s}}var o=r(2),i=r(0),s=r(27),a=r(28);n.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),(e=i.merge(o,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[a,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},i.forEach(["delete","get","head","options"],function(e){n.prototype[e]=function(t,r){return this.request(i.merge(r||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){n.prototype[e]=function(t,r,n){return this.request(i.merge(n||{},{method:e,url:t,data:r}))}}),e.exports=n},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},function(e,t,r){"use strict";var n=r(8);e.exports=function(e,t,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},function(e){"use strict";e.exports=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e}},function(e,t,r){"use strict";function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=r(0);e.exports=function(e,t,r){if(!t)return e;var i;if(r)i=r(t);else if(o.isURLSearchParams(t))i=t.toString();else{var s=[];o.forEach(t,function(e,t){null==e||(o.isArray(e)?t+="[]":e=[e],o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),s.push(n(t)+"="+n(e))}))}),i=s.join("&")}return i&&(e+=(-1===e.indexOf("?")?"?":"&")+i),e}},function(e,t,r){"use strict";var n=r(0),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,i,s={};return e?(n.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),t=n.trim(e.substr(0,i)).toLowerCase(),r=n.trim(e.substr(i+1)),t){if(s[t]&&0<=o.indexOf(t))return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([r]):s[t]?s[t]+", "+r:r}}),s):s}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?function(){function e(e){var t=e;return r&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var t,r=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return t=e(window.location.href),function(r){var o=n.isString(r)?e(r):r;return o.protocol===t.protocol&&o.host===t.host}}():function(){return!0}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,o,i,s){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(o)&&a.push("path="+o),n.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";function n(){this.handlers=[]}var o=r(0);n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){o.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=n},function(e,t,r){"use strict";function n(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var o=r(0),i=r(29),s=r(9),a=r(2),u=r(30),c=r(31);e.exports=function(e){return n(e),e.baseURL&&!u(e.url)&&(e.url=c(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||a.adapter)(e).then(function(t){return n(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return s(t)||(n(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t,r){return n.forEach(r,function(r){e=r(e,t)}),e}},function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new o(e),t(r.reason))})}var o=r(10);n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n(function(t){e=t}),cancel:e}},e.exports=n},function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.api=e}getInfo(){return this.api.get("info").then(e=>e.data)}getPeers(){return this.api.get("peers").then(e=>e.data)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(36),o=r(11),i=r(1);t.default=class{constructor(e,t){this.api=e,this.crypto=t}getPrice(e,t){let r=t?`price/${e}/${t}`:`price/${e}`;return this.api.get(r,{transformResponse:[function(e){return e}]}).then(e=>e.data)}get(e){return this.api.get(`tx/${e}`).then(t=>{if(200==t.status&&t.data&&t.data.id==e)return new o.default(t.data);if(202==t.status)throw new n.default("TX_PENDING");if(404==t.status)throw new n.default("TX_NOT_FOUND");if(410==t.status)throw new n.default("TX_FAILED");throw new n.default("TX_INVALID")})}fromRaw(e){return new o.default(e)}async search(e,t){return this.api.post("arql",{op:"equals",expr1:e,expr2:t}).then(e=>e.data?e.data:[])}getStatus(e){return this.api.get(`tx/${e}/status`).then(e=>200==e.status?{status:200,confirmed:e.data}:{status:e.status,confirmed:null})}getData(e,t){return this.api.get(`tx/${e}/data`).then(e=>{if(200===e.status){const r=e.data;return t&&1==t.decode?t&&t.string?i.b64UrlToString(r):i.b64UrlToBuffer(r):r}return null})}async sign(e,t){let r=e.getSignatureData(),n=await this.crypto.sign(t,r),o=await this.crypto.hash(n);e.setSignature({signature:i.bufferTob64Url(n),id:i.bufferTob64Url(o)})}async verify(e){const t=e.getSignatureData(),r=e.get("signature",{decode:!0,string:!1}),n=i.bufferTob64Url(await this.crypto.hash(r));if(e.id!==n)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(e.owner,t,r)}post(e){return this.api.post("tx",e).then(e=>e)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class extends Error{constructor(e,t={}){t.message?super(t.message):super(),this.type=e,this.response=t.response}getType(){return this.type}}},function(e,t){"use strict";function r(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function n(e,t,r){for(var n,i=[],s=t;s<r;s+=3)n=(16711680&e[s]<<16)+(65280&e[s+1]<<8)+(255&e[s+2]),i.push(o[63&(a=n)>>18]+o[63&a>>12]+o[63&a>>6]+o[63&a]);var a;return i.join("")}t.byteLength=function(e){var t=r(e),n=t[0],o=t[1];return 3*(n+o)/4-o},t.toByteArray=function(e){for(var t,n=r(e),o=n[0],a=n[1],u=new s(function(e,t,r){return 3*(t+r)/4-r}(0,o,a)),c=0,f=0<a?o-4:o,l=0;l<f;l+=4)t=i[e.charCodeAt(l)]<<18|i[e.charCodeAt(l+1)]<<12|i[e.charCodeAt(l+2)]<<6|i[e.charCodeAt(l+3)],u[c++]=255&t>>16,u[c++]=255&t>>8,u[c++]=255&t;return 2===a&&(t=i[e.charCodeAt(l)]<<2|i[e.charCodeAt(l+1)]>>4,u[c++]=255&t),1===a&&(t=i[e.charCodeAt(l)]<<10|i[e.charCodeAt(l+1)]<<4|i[e.charCodeAt(l+2)]>>2,u[c++]=255&t>>8,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,s=[],a=0,u=r-i;a<u;a+=16383)s.push(n(e,a,a+16383>u?u:a+16383));return 1==i?(t=e[r-1],s.push(o[t>>2]+o[63&t<<4]+"==")):2==i&&(t=(e[r-2]<<8)+e[r-1],s.push(o[t>>10]+o[63&t>>4]+o[63&t<<2]+"=")),s.join("")};for(var o=[],i=[],s="undefined"==typeof Uint8Array?Array:Uint8Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,c=a.length;u<c;++u)o[u]=a[u],i[a.charCodeAt(u)]=u;i[45]=62,i[95]=63},function(e){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e){e.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);t.default=class{constructor(e,t){this.api=e,this.crypto=t}getBalance(e){return this.api.get(`wallet/${e}/balance`,{transformResponse:[function(e){return e}]}).then(e=>e.data)}getLastTransactionID(e){return this.api.get(`wallet/${e}/last_tx`).then(e=>e.data)}generate(){return this.crypto.generateJWK()}async jwkToAddress(e){return this.ownerToAddress(e.n)}async ownerToAddress(e){return n.bufferTob64Url(await this.crypto.hash(n.b64UrlToBuffer(e)))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);t.default=class{constructor(e,t,r){this.api=e,this.crypto=t,this.transactions=r}async get(e){if(!e)throw new Error("No Silo URI specified");const t=await this.parseUri(e),r=await this.transactions.search("Silo-Name",t.getAccessKey());if(0==r.length)throw new Error(`No data could be found for the Silo URI: ${e}`);const n=await this.transactions.get(r[0]);if(!n)throw new Error(`No data could be found for the Silo URI: ${e}`);const o=n.get("data",{decode:!0,string:!1});return this.crypto.decrypt(o,t.getEncryptionKey())}async readTransactionData(e,t){if(!t)throw new Error("No Silo URI specified");const r=await this.parseUri(t),n=e.get("data",{decode:!0,string:!1});return this.crypto.decrypt(n,r.getEncryptionKey())}async parseUri(e){const t=e.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!t)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");const r=t[1],i=Math.pow(2,parseInt(t[2])),s=await this.hash(n.stringToBuffer(r),i),a=n.bufferTob64(s.slice(0,15)),u=await this.hash(s.slice(16,31),1);return new o(e,a,u)}async hash(e,t){let r=await this.crypto.hash(e);for(let e=0;e<t-1;e++)r=await this.crypto.hash(r);return r}};class o{constructor(e,t,r){this.uri=e,this.accessKey=t,this.encryptionKey=r}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}}t.SiloResource=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1);t.default=class{constructor(){if(this.keyLength=4096,this.publicExponent=65537,this.hashAlgorithm="sha256",!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=window.crypto.subtle}async generateJWK(){let e=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),t=await this.driver.exportKey("jwk",e.privateKey);return{kty:t.kty,e:t.e,n:t.n,d:t.d,p:t.p,q:t.q,dp:t.dp,dq:t.dq,qi:t.qi}}async sign(e,t){let r=await this.driver.sign({name:"RSA-PSS",saltLength:0},await this.jwkToCryptoKey(e),t);return new Uint8Array(r)}async hash(e){let t=await this.driver.digest("SHA-256",e);return new Uint8Array(t)}async verify(e,t,r){const n=await this.jwkToPublicCryptoKey({kty:"RSA",e:"AQAB",n:e});return this.driver.verify({name:"RSA-PSS",saltLength:0},n,r,t)}async jwkToCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(e){return this.driver.importKey("jwk",e,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if(!window||!window.crypto||!window.crypto.subtle)return!1;let e=window.crypto.subtle;return!("function"!=typeof e.generateKey||"function"!=typeof e.importKey||"function"!=typeof e.exportKey||"function"!=typeof e.digest||"function"!=typeof e.sign)}async encrypt(e,t){const r=await this.driver.importKey("raw","string"==typeof t?n.stringToBuffer(t):t,{name:"PBKDF2",length:32},!1,["deriveKey"]),o=n.stringToBuffer("salt"),i=await this.driver.deriveKey({name:"PBKDF2",salt:o,iterations:1e5,hash:"SHA-256"},r,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),s=new Uint8Array(16);crypto.getRandomValues(s);const a=await this.driver.encrypt({name:"AES-CBC",iv:s},i,e);return n.concatBuffers([s,a])}async decrypt(e,t){const r=await this.driver.importKey("raw","string"==typeof t?n.stringToBuffer(t):t,{name:"PBKDF2",length:32},!1,["deriveKey"]),o=n.stringToBuffer("salt"),i=await this.driver.deriveKey({name:"PBKDF2",salt:o,iterations:1e5,hash:"SHA-256"},r,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),s=e.slice(0,16),a=await this.driver.decrypt({name:"AES-CBC",iv:s},i,e.slice(16));return n.concatBuffers([a])}}}]);</script>
<script>var cookieScore,wallet,loggedIn=!1,label=document.getElementById("loginDesc");const arweave=Arweave.init();function login(e){var o=new FileReader;o.onload=function(e){try{if(wallet=JSON.parse(e.target.result),new URLSearchParams(window.location.search).has("to"))console.log("hello");else if(console.log("logged in"),document.getElementById("myHiScore").innerHTML="N/A (Play a game!)",loginDesc.innerHTML="Logged In",loginDesc.style.color="limegreen",loginDesc.style.textShadow="0px,0px,2px,black",loggedIn=!0,console.log(wallet),""!=document.cookie){var o=document.cookie;console.log(typeof o),console.log("cookie  = "+o),o=getCookie("txid"),console.log("cookie txid = "+o),arweave.transactions.getData(o,{decode:!0,string:!0}).then(e=>{cookieScore=parseInt(e),console.log("permaweb data = "+e),console.log("permaweb score = "+cookieScore),document.getElementById("myHiScore").innerHTML=e,document.getElementById("myHiScore").style.color="limegreen",document.getElementById("myHiScore").style.textShadow="0px,0px,2px,black"})}else console.log("no cookie")}catch(e){alert("Error logging in: "+e)}},o.readAsText(e[0])}function getCookie(e){for(var o=e+"=",n=decodeURIComponent(document.cookie).split(";"),t=0;t<n.length;t++){for(var l=n[t];" "==l.charAt(0);)l=l.substring(1);if(0==l.indexOf(o))return l.substring(o.length,l.length)}return""}arweave.network.getInfo().then(console.log);</script>
<script>var blockColor,stillInAir,canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d"),ballRadius=10,x=canvas.width/2,y=canvas.height-30,dx=getRandomInt(2)+1,dy=-3,paddleHeight=10,paddleWidth=75,paddleX=(canvas.width-paddleWidth)/2,rightPressed=!1,leftPressed=!1,brickRowCount=5,brickColumnCount=1,brickWidth=75,brickHeight=20,brickPadding=10,brickOffsetTop=30,brickOffsetLeft=30,score=0,lives=3,ballColor="#00ff00",blockColorR=0,blockColorG=0,blockColorB=0,paddleColor="#0095DD",bricks=[],previousLevelBricks=0,round=0,scoreMultiplier=1,bricksHit=0;function pauseHandler(e){"p"==e.key&&alert("PAUSED")}function pause(){alert("PAUSED")}function keyDownHandler(e){"Right"==e.key||"ArrowRight"==e.key?rightPressed=!0:"Left"!=e.key&&"ArrowLeft"!=e.key||(leftPressed=!0)}function keyUpHandler(e){"Right"==e.key||"ArrowRight"==e.key?rightPressed=!1:"Left"!=e.key&&"ArrowLeft"!=e.key||(leftPressed=!1)}function mouseMoveHandler(e){var t=e.clientX/4;t>0&&t<canvas.width&&(paddleX=t-paddleWidth/2)}function collisionDetection(){for(var e=0;e<brickColumnCount;e++)for(var t=0;t<brickRowCount;t++){var o=bricks[e][t];1==o.status&&x>o.x&&x<o.x+brickWidth&&y>o.y&&y<o.y+brickHeight&&(stillInAir&&scoreMultiplier<1e3&&(scoreMultiplier*=2),stillInAir=!0,dy=-dy,o.status=0,score+=1*scoreMultiplier,++bricksHit==brickRowCount*brickColumnCount&&(alert("NICE! Next round..."),restart()))}}function restart(){paddleX=(canvas.width-paddleWidth)/2,x=canvas.width/2,y=canvas.height-2*ballRadius,dx=getRandomInt(10)<5?3:-3,dy<7&&(dy*=1.1),dy>0&&(dy*=-1),brickWidth=75,brickHeight=20,bricksHit=0,++round<8&&(brickColumnCount+=1),stillInAir=!1,scoreMultiplier=1,setBrickCount()}function drawBall(){ctx.beginPath(),ctx.arc(x,y,ballRadius,0,2*Math.PI),ctx.fillStyle=ballColor,ctx.fill(),ctx.closePath()}function drawPaddle(){ctx.beginPath(),ctx.rect(paddleX,canvas.height-paddleHeight,paddleWidth,paddleHeight),ctx.fillStyle=paddleColor,ctx.fill(),ctx.closePath()}function getRandomInt(e){return Math.floor(Math.random()*Math.floor(e))}document.addEventListener("keydown",keyDownHandler,!1),document.addEventListener("keyup",keyUpHandler,!1),document.addEventListener("mousemove",mouseMoveHandler,!1),document.addEventListener("keypress",pauseHandler,!1);var rChange=1,gChange=1,bChange=1;function drawBricks(){blockColorR+=blockColorR<=255&&blockColorR>0?rChange:rChange*=-1,blockColorB+=blockColorB<255&&blockColorB>0?bChange:bChange*=-1,blockColorG+=blockColorG<255&&blockColorG>0?gChange:gChange*=-1,blockColor="rgb("+blockColorR+","+blockColorG+","+blockColorB+")";for(var e=0;e<brickColumnCount;e++)for(var t=0;t<brickRowCount;t++)if(1==bricks[e][t].status){var o=t*(brickWidth+brickPadding)+brickOffsetLeft,r=e*(brickHeight+brickPadding)+brickOffsetTop;bricks[e][t].x=o,bricks[e][t].y=r,ctx.beginPath(),ctx.rect(o,r,brickWidth,brickHeight),ctx.fillStyle=blockColor,ctx.fill(),ctx.closePath()}}function drawScore(){ctx.font="16px Arial",ctx.fillStyle="green",scoreMultiplier>1?ctx.fillText("score: "+score+" X"+scoreMultiplier,8,20):ctx.fillText("score: "+score,8,20)}function drawLives(){ctx.font="16px Arial",ctx.fillStyle=lives<=1?"red":"black",ctx.fillText("lives: "+lives,canvas.width-65,20)}function drawRound(){ctx.font="14px Arial",ctx.fillStyle="black",ctx.fillText("round: "+(round+1),canvas.width/2-canvas.width/10,20)}function draw(){if(ctx.clearRect(0,0,canvas.width,canvas.height),drawBricks(),drawBall(),drawPaddle(),drawScore(),drawLives(),drawRound(),collisionDetection(),(x+dx>canvas.width-ballRadius||x+dx<ballRadius)&&(dx=-dx),y+dy<ballRadius)dy=-dy;else if(y+dy>canvas.height)if(x>paddleX&&x<paddleX+paddleWidth)stillInAir=!1,scoreMultiplier=1,dy=-dy;else{if(--lives<=0)return drawLives(),void(loggedIn?confirm("GAME OVER\nSave score to Arweave permaweb?")&&(score>cookieScore||null==cookieScore||"undefined"==cookieScore?uploadScore(score):console.log("score not higher than cookie score")):(alert("GAME OVER"),console.log("Score not uploaded - not logged in to arweave"),document.location.reload()));alert("FAIL! You have "+lives+" lives left..."),dx=getRandomInt(10)<5?3:-3,dy<7&&(dy*=1.1),dy>0&&(dy*=-1),stillInAir=!1,scoreMultiplier=1,x=canvas.width/2,y=canvas.height-2*ballRadius,paddleX=(canvas.width-paddleWidth)/2}rightPressed&&paddleX<canvas.width-paddleWidth?paddleX+=7:leftPressed&&paddleX>0&&(paddleX-=7),x+=dx,y+=dy,requestAnimationFrame(draw)}function setBrickCount(){blockColorR=getRandomInt(255),blockColorG=getRandomInt(255),blockColorB=getRandomInt(255),blockColor="rgb("+blockColorR+","+blockColorG+","+blockColorB+")",console.log(blockColor);for(var e=0;e<brickColumnCount;e++){bricks[e]=[];for(var t=0;t<brickRowCount;t++)bricks[e][t]={x:0,y:0,status:1}}}var awaitLogin=setInterval(function(){loggedIn?(setBrickCount(),draw(),clearInterval(awaitLogin),document.getElementById("loginReminder").remove(),alert("Logged in successfully.\nPlay Now!")):document.getElementById("loginReminder").innerHTML="Please Login to Arweave</br>or</br><button onclick='noArweavePlay()'>Play without Arweave</button> </br>"},2500);function noArweavePlay(){setBrickCount(),draw(),clearInterval(awaitLogin),document.getElementById("loginReminder").remove(),alert("Playing without Arweave.\nPlay Now!")}var txStatus=document.getElementById("txStatus"),myHiScore=document.getElementById("myHiScore");async function uploadScore(){document.getElementById("myHiScore").innerHTML=score;let e=await arweave.createTransaction({data:""+score},wallet);console.log(e),console.log("signing tx"),txStatus.innerHTML="Signing tx...",await arweave.transactions.sign(e,wallet),console.log("submitting tx"),txStatus.innerHTML="Submitting score to permaweb...";const t=await arweave.transactions.post(e);console.log(t.status),console.log(e.id),document.cookie="txid="+e.id+"; expires=Tue, 01 Jan 2099 12:00:00 UTC; path=/",console.log("cookie created, value = "+document.cookie);var o=setInterval(function(){console.log(e.id),arweave.transactions.getStatus(e.id).then(t=>{if(console.log(t),t.confirmed){var r=e.get("data",{decode:!0,string:!0});console.log(r),myHiScore.innerHTML=r,txStatus.innerHTML="Tx confirmed, your score has been submitted to the permaweb!",txStatus.style.color="limegreen",txStatus.style.textShadow="0px,0px,5px,black",clearInterval(o),confirm("Your score is stored in the data of transaction ID - "+e.id+"\n Reload page and play again?")&&window.location.reload()}else txStatus.innerHTML="Awaiting tx confirmation... (current status: "+t.status+")"})},5e3)}</script>
</body>